stock_data_list = [{'VolumeDate': '1/29/2025', 'ExtendedHoursDate': '1/29/2025', 'ExtendedHoursTime': '6:56:08 PM', 'ExtendedHoursType': 'PostMarket', 'ExtendedHoursPrice': 146.48, 'ExtendedHoursChange': -0.61, 'ExtendedHoursPercentChange': -0.415, 'LimitDate': '1/29/2025', 'LimitTime': '3:59:30 PM', 'LimitDown': 132.47, 'LimitUp': 161.91, 'Date': '1/29/2025', 'Time': '4:00:00 PM', 'UTCOffset': -5, 'Open': 148.99, 'Close': 147.09, 'High': 149.9, 'Low': 146.55, 'Last': 147.09, 'LastSize': 204816, 'Volume': 1583243, 'PreviousClose': 150.34, 'PreviousCloseDate': '1/28/2025', 'ChangeFromPreviousClose': -3.25, 'PercentChangeFromPreviousClose': -2.162, 'Bid': 139.5, 'BidSize': 100, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 148.24, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 155.35, 'Low52Weeks': 124.16, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'XNYS', 'AskMarketIdentificationCode': 'XNYS', 'LastMarketIdentificationCode': 'XNYS', 'Identifier': 'A.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '0001090872', 'CUSIP': None, 'Symbol': 'A', 'ISIN': None, 'Valoren': '901692', 'Name': 'Agilent Technologies Inc.', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': ''}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': 'Request', 'Delay': 0.0391394}, {'VolumeDate': '1/29/2025', 'ExtendedHoursDate': '1/29/2025', 'ExtendedHoursTime': '7:56:09 PM', 'ExtendedHoursType': 'PostMarket', 'ExtendedHoursPrice': 35.1658, 'ExtendedHoursChange': 0.0358, 'ExtendedHoursPercentChange': 0.102, 'LimitDate': '1/29/2025', 'LimitTime': '4:00:00 PM', 'LimitDown': 31.51, 'LimitUp': 38.51, 'Date': '1/29/2025', 'Time': '4:00:00 PM', 'UTCOffset': -5, 'Open': 34.32, 'Close': 35.13, 'High': 35.26, 'Low': 34.32, 'Last': 35.13, 'LastSize': 497803, 'Volume': 5534714, 'PreviousClose': 34.15, 'PreviousCloseDate': '1/28/2025', 'ChangeFromPreviousClose': 0.98, 'PercentChangeFromPreviousClose': 2.87, 'Bid': 35, 'BidSize': 300, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 35.41, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 47.77, 'Low52Weeks': 24.86, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'XNYS', 'AskMarketIdentificationCode': 'XNYS', 'LastMarketIdentificationCode': 'XNYS', 'Identifier': 'AA.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '0001675149', 'CUSIP': None, 'Symbol': 'AA', 'ISIN': None, 'Valoren': '34298184', 'Name': 'Alcoa Corp', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': 'Aluminum'}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': None, 'Delay': 0}, {'VolumeDate': '1/29/2025', 'ExtendedHoursDate': None, 'ExtendedHoursTime': None, 'ExtendedHoursType': None, 'ExtendedHoursPrice': 0, 'ExtendedHoursChange': 0, 'ExtendedHoursPercentChange': 0, 'LimitDate': '1/29/2025', 'LimitTime': '4:00:00 PM', 'LimitDown': 9.95, 'LimitUp': 12.16, 'Date': '1/29/2025', 'Time': '3:59:00 PM', 'UTCOffset': -5, 'Open': 11.05, 'Close': 11.01, 'High': 11.05, 'Low': 11, 'Last': 11.01, 'LastSize': 200, 'Volume': 617818, 'PreviousClose': 11, 'PreviousCloseDate': '1/28/2025', 'ChangeFromPreviousClose': 0.01, 'PercentChangeFromPreviousClose': 0.091, 'Bid': 10.9, 'BidSize': 100, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 11.32, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 11.05, 'Low52Weeks': 10.48, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'LTSE', 'AskMarketIdentificationCode': 'LTSE', 'LastMarketIdentificationCode': 'XNYS', 'Identifier': 'AACT.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '0001853138', 'CUSIP': None, 'Symbol': 'AACT', 'ISIN': None, 'Valoren': '126210922', 'Name': 'Ares Acquisition Corporation II - Ordinary Shares - Class A', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': 'FinancialConglomerates'}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': None, 'Delay': 0}, {'VolumeDate': '1/27/2025', 'ExtendedHoursDate': None, 'ExtendedHoursTime': None, 'ExtendedHoursType': None, 'ExtendedHoursPrice': 0, 'ExtendedHoursChange': 0, 'ExtendedHoursPercentChange': 0, 'LimitDate': '1/29/2025', 'LimitTime': '4:00:00 PM', 'LimitDown': 10.03, 'LimitUp': 12.25, 'Date': '1/27/2025', 'Time': '10:01:53 AM', 'UTCOffset': -5, 'Open': 11.14, 'Close': 11.14, 'High': 11.14, 'Low': 11.14, 'Last': 11.14, 'LastSize': 100, 'Volume': 182, 'PreviousClose': 11.1, 'PreviousCloseDate': '1/14/2025', 'ChangeFromPreviousClose': 0.04, 'PercentChangeFromPreviousClose': 0.36, 'Bid': 4.46, 'BidSize': 100, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 17.82, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 11.66, 'Low52Weeks': 10.45, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'XNYS', 'AskMarketIdentificationCode': 'ARCX', 'LastMarketIdentificationCode': 'XNAS', 'Identifier': 'AACT/UN.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '0001853138', 'CUSIP': None, 'Symbol': 'AACT/UN', 'ISIN': None, 'Valoren': '126210927', 'Name': 'Ares Acquisition Corporation II - Units (1 Ord Class A & 1/2 War)', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': 'FinancialConglomerates'}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': None, 'Delay': 0}, {'VolumeDate': '1/29/2025', 'ExtendedHoursDate': '1/29/2025', 'ExtendedHoursTime': '6:56:08 PM', 'ExtendedHoursType': 'PostMarket', 'ExtendedHoursPrice': 146.48, 'ExtendedHoursChange': -0.61, 'ExtendedHoursPercentChange': -0.415, 'LimitDate': '1/29/2025', 'LimitTime': '3:59:30 PM', 'LimitDown': 132.47, 'LimitUp': 161.91, 'Date': '1/29/2025', 'Time': '4:00:00 PM', 'UTCOffset': -5, 'Open': 148.99, 'Close': 147.09, 'High': 149.9, 'Low': 146.55, 'Last': 147.09, 'LastSize': 204816, 'Volume': 1583243, 'PreviousClose': 150.34, 'PreviousCloseDate': '1/28/2025', 'ChangeFromPreviousClose': -3.25, 'PercentChangeFromPreviousClose': -2.162, 'Bid': 139.5, 'BidSize': 100, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 148.24, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 155.35, 'Low52Weeks': 124.16, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'XNYS', 'AskMarketIdentificationCode': 'XNYS', 'LastMarketIdentificationCode': 'XNYS', 'Identifier': 'A.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '10001090872', 'CUSIP': None, 'Symbol': 'MAR', 'ISIN': None, 'Valoren': '901692', 'Name': 'Sample record', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': ''}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': 'Request', 'Delay': 0.0391394}]
import json
# a = {'VolumeDate': '1/29/2025', 'ExtendedHoursDate': '1/29/2025', 'ExtendedHoursTime': '6:56:08 PM', 'ExtendedHoursType': 'PostMarket', 'ExtendedHoursPrice': 146.48, 'ExtendedHoursChange': -0.61, 'ExtendedHoursPercentChange': -0.415, 'LimitDate': '1/29/2025', 'LimitTime': '3:59:30 PM', 'LimitDown': 132.47, 'LimitUp': 161.91, 'Date': '1/29/2025', 'Time': '4:00:00 PM', 'UTCOffset': -5, 'Open': 148.99, 'Close': 147.09, 'High': 149.9, 'Low': 146.55, 'Last': 147.09, 'LastSize': 204816, 'Volume': 1583243, 'PreviousClose': 150.34, 'PreviousCloseDate': '1/28/2025', 'ChangeFromPreviousClose': -3.25, 'PercentChangeFromPreviousClose': -2.162, 'Bid': 139.5, 'BidSize': 100, 'BidDate': '1/29/2025', 'BidTime': '8:00:00 PM', 'Ask': 148.24, 'AskSize': 100, 'AskDate': '1/29/2025', 'AskTime': '8:00:00 PM', 'High52Weeks': 155.35, 'Low52Weeks': 124.16, 'Currency': 'USD', 'TradingHalted': False, 'BidMarketIdentificationCode': 'XNYS', 'AskMarketIdentificationCode': 'XNYS', 'LastMarketIdentificationCode': 'XNYS', 'Identifier': 'A.XNYS', 'IdentifierType': 'Symbol', 'Security': {'CIK': '10001090872', 'CUSIP': None, 'Symbol': 'MAR', 'ISIN': None, 'Valoren': '901692', 'Name': 'Sample record', 'Market': 'NYSE', 'MarketIdentificationCode': 'XNYS', 'MostLiquidExchange': False, 'CategoryOrIndustry': ''}, 'Outcome': 'Success', 'Message': 'Delay times are 15 mins for NYSE.', 'Identity': 'Request', 'Delay': 0.0391394}
# print(json.dumps(a))
# print(json.dumps(a, indent=4))

# old industry MedicalSpecialties with pk 138
# old industry Steel with pk 188
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry InvestmentManagers with pk 146
# old industry SpecialtyStores with pk 142
# old industry RealEstateInvestmentTrusts with pk 141
# old industry PharmaceuticalsMajor with pk 143
# old industry RegionalBanks with pk 177
# old industry SpecialtyStores with pk 142
# old industry MiscellaneousCommercialServices with pk 145
# old industry RealEstateInvestmentTrusts with pk 141
# old industry MedicalSpecialties with pk 138
# old industry InvestmentManagers with pk 146
# old industry TrucksOrConstructionOrFarmMachinery with pk 147
# old industry MiscellaneousCommercialServices with pk 145


# old industry MedicalSpecialties with pk 138
# old industry Aluminum with pk 139
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry FinancialConglomerates with pk 140
# old industry InvestmentManagers with pk 146
# old industry SpecialtyStores with pk 142
# old industry RealEstateInvestmentTrusts with pk 141
# old industry PharmaceuticalsMajor with pk 143
# old industry RegionalBanks with pk 177
# old industry SpecialtyStores with pk 142
# old industry MiscellaneousCommercialServices with pk 145
# old industry RealEstateInvestmentTrusts with pk 141
# old industry MedicalSpecialties with pk 138
# old industry InvestmentManagers with pk 146
# old industry TrucksOrConstructionOrFarmMachinery with pk 147
# old industry OfficeEquipmentOrSupplies with pk 148
# old industry MoviesOrEntertainment with pk 149

from django.views import View
from django.http import HttpResponse, Http404

class FirstView(View):
    def get(self, request):
        return HttpResponse("This is the first response.")

class SecondView(View):
    def get(self, request, id):
        if not postid:
            raise Http404()
        return HttpResponse(f'This is the filter type {postid}')

 
from datetime import datetime
from django.utils import timezone
import pytz

d = datetime.now(tz=pytz.UTC).date().strftime('%H-%M-%S')
# print(d)
import os

import subprocess

shell_command = '''
lines_count=$(cat prod.log | grep 2025-02-20 | wc -l)
echo '$(lines_count)'
'''
log_datetime_str = subprocess.check_output(shell_command, shell=True, text=True).strip()

# output = subprocess.check_output(shell_command, shell=True, text=True)

if log_datetime_str == 'false':
    print('More than 500 lines have been added to  in the past 5 minutes')

print(log_datetime_str, type(log_datetime_str))




from django.shortcuts import render
from django.views import View
# Create your views here.
from django.http import Http404

class Test(View):
    def get(self, request):
        try:
            raise Http404('Page not found')
        except Http404:
            raise Http404    
        except Exception as err:
            return HttpResponse(str(err))


from django.views.generic import TemplateView
from .models import *

class StockView(TemplateView):
    template_name = 'test.html'
    def get(self, request):
        a = A.objects.first()    
        temp = [1, 2, 3]
        return render(request, self.template_name, context={"stockprofile": a, 'name': 'ram', 'temp': temp})

from django.core.files.storage import FileSystemStorage
from django.core.files import File
from django.core.files.uploadedfile import UploadedFile

class UploadFile(TemplateView):
    template_name = 'upload_file.html'
    def post(self, request):
        checkbox = request.POST.get('make-live') == 'on'
        print(request.POST, checkbox, '---checkbox---------')
        file = request.FILES['file']
        file_path = '/home/trendlyne/datastore/(cname) Results Earnings Call for Q3FY25.mp4'
        with open(file_path, 'rb') as f:
            temp_file = UploadedFile(file=f, name=os.path.basename(file_path), content_type='video/mp4', size=os.path.getsize(file_path))
            print(temp_file, type(temp_file), temp_file.size, temp_file.content_type)
            f_obj = FileUploadModel(name='ram')
            f_obj.file.save(temp_file.name, temp_file, save=True)
            return render(request, self.template_name)

from django.http import HttpResponseRedirect
from django.urls import reverse

class UploadFileView(TemplateView):
    template_name = 'upload_file.html'
    def get(self, request):
        return render(request, self.template_name)
    def post(self, request):
        print(request.POST, '-----------post----------')
        # u = reverse('stock_fundamental_UploadFile')
        # up = f"{u}?id=1"
        return HttpResponse('sakdjfbuisdfa')


# class UploadFile(TemplateView):
#     template_name = 'upload_file.html'

#     def post(self, request):
#         file = request.FILES['file']
        
#         file_path = '/home/trendlyne/datastore/(cname) Results Earnings Call for Q3FY25.mp4'

#         # Open the file in binary read mode
#         with open(file_path, 'rb') as f:
#             file_size = os.path.getsize(file_path)
            
#             temp_file = UploadedFile(
#                 file=f, 
#                 name=os.path.basename(file_path),
#                 content_type="video/mp4",
#                 size=file_size
#             )

#             print(temp_file, type(temp_file), temp_file.size, temp_file.content_type)

#             f_obj = FileUploadModel()
#             f_obj.file.save(temp_file.name, temp_file, save=True)

#         return render(request, self.template_name)

from api.models import ChoiceModel, Choice2Model

class Tbnm(View):
    def get(self, request):
        c1 = ChoiceModel.objects.values()
        c2 = Choice2Model.objects.values()

        return HttpResponse("DONer")

